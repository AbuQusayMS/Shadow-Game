<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</title>
    <style>
        :root {
            --primary-color: #4e54c8;
            --secondary-color: #8f94fb;
            --correct-color: #4caf50;
            --wrong-color: #f44336;
            --easy-color: #4caf50;
            --medium-color: #2196f3;
            --hard-color: #ff9800;
            --impossible-color: #f44336;
            --light-bg: #f9f9f9;
            --dark-bg: #1a1a2e;
            --light-text: #333;
            --dark-text: #f9f9f9;
            --transition: all 0.3s ease;
        }

        .dark-mode {
            --primary-color: #6a71e5;
            --secondary-color: #9ba0ff;
            --light-bg: #1a1a2e;
            --dark-bg: #f9f9f9;
            --light-text: #f9f9f9;
            --dark-text: #333;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: var(--light-text);
            min-height: 100vh;
            transition: var(--transition);
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }

        .dark-mode .container {
            background-color: rgba(26, 26, 46, 0.9);
            color: var(--dark-text);
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 {
            color: var(--primary-color);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .logo {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Ø´Ø§Ø´Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„Ø§Ø¹Ø¨ */
        .avatar-selection {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: var(--transition);
            object-fit: cover;
        }

        .avatar.selected {
            border-color: var(--primary-color);
            transform: scale(1.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 5px rgba(78, 84, 200, 0.5);
        }

        .player-id {
            background-color: #f0f0f0;
            color: #666;
            cursor: not-allowed;
        }

        .dark-mode .player-id {
            background-color: #2d2d46;
            color: #ccc;
        }

        .btn {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: var(--transition);
            display: inline-block;
            text-align: center;
            margin: 5px;
        }

        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-danger {
            background: var(--wrong-color);
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© */
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .level-progress {
            display: flex;
            width: 100%;
            margin: 15px 0;
            border-radius: 8px;
            overflow: hidden;
            height: 30px;
        }

        .level-segment {
            flex: 1;
            text-align: center;
            padding: 5px;
            color: white;
            font-weight: bold;
        }

        .level-easy {
            background-color: var(--easy-color);
        }

        .level-medium {
            background-color: var(--medium-color);
        }

        .level-hard {
            background-color: var(--hard-color);
        }

        .level-impossible {
            background-color: var(--impossible-color);
        }

        .timer-container {
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }

        .timer-bar {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            width: 100%;
            transition: width 1s linear;
        }

        .player-info {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .player-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-left: 15px;
            object-fit: cover;
        }

        .player-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat {
            background-color: rgba(78, 84, 200, 0.1);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            flex: 1;
            min-width: 100px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .question-container {
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .option-btn {
            background-color: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            text-align: right;
            font-size: 1rem;
            transition: var(--transition);
        }

        .dark-mode .option-btn {
            background-color: #2d2d46;
            border-color: #3d3d5c;
        }

        .option-btn:hover {
            background-color: #e0e0e0;
            border-color: #ccc;
        }

        .dark-mode .option-btn:hover {
            background-color: #3d3d5c;
            border-color: #4d4d7c;
        }

        .option-btn.correct {
            background-color: var(--correct-color);
            color: white;
            border-color: var(--correct-color);
        }

        .option-btn.wrong {
            background-color: var(--wrong-color);
            color: white;
            border-color: var(--wrong-color);
        }

        .help-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .help-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: rgba(78, 84, 200, 0.1);
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            min-width: 80px;
        }

        .help-btn:hover {
            background-color: rgba(78, 84, 200, 0.2);
        }

        .help-btn i {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .help-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
        .results-container {
            text-align: center;
        }

        .achievement-badge {
            font-size: 3rem;
            margin: 20px 0;
        }

        .results-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .result-stat {
            background-color: rgba(78, 84, 200, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .result-stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .performance-bar {
            height: 20px;
            background-color: #eee;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .performance-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            width: 0%;
            transition: width 1.5s ease;
        }

        .social-share {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        /* Ø´Ø§Ø´Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø© */
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .leaderboard-table th, .leaderboard-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }

        .leaderboard-table th {
            background-color: rgba(78, 84, 200, 0.1);
        }

        .dark-mode .leaderboard-table th {
            background-color: rgba(78, 84, 200, 0.2);
        }

        .rank-1, .rank-2, .rank-3 {
            font-weight: bold;
        }

        .rank-1 {
            color: gold;
            font-size: 1.2rem;
        }

        .rank-2 {
            color: silver;
            font-size: 1.1rem;
        }

        .rank-3 {
            color: #cd7f32; /* bronze */
        }

        /* Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0.3s, transform 0.3s;
        }

        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }

        .notification.success {
            background-color: var(--correct-color);
        }

        .notification.error {
            background-color: var(--wrong-color);
        }

        .notification.info {
            background-color: var(--primary-color);
        }

        /* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ© */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .player-stats {
                flex-direction: column;
                gap: 10px;
            }
            
            .stat {
                min-width: auto;
            }
            
            .results-stats {
                grid-template-columns: 1fr;
            }
            
            .help-buttons {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }
            
            .avatar {
                width: 60px;
                height: 60px;
            }
            
            .question-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .level-progress {
                height: 20px;
            }
            
            .level-segment {
                font-size: 0.8rem;
                padding: 2px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
        <div id="splash-screen" class="screen active">
            <header>
                <div class="logo">ğŸ§ </div>
                <h1>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h1>
                <p>Ø§Ø®ØªØ¨Ø± Ù‚Ø¯Ø±Ø§ØªÙƒ ÙÙŠ Ù…Ø³Ø§Ø¨Ù‚Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ø´ÙŠÙ‚Ø©!</p>
            </header>
            <div style="text-align: center; margin-top: 30px;">
                <button id="start-btn" class="btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„Ø§Ø¹Ø¨ -->
        <div id="player-setup" class="screen">
            <header>
                <h1>Ø§Ø®ØªØ± ØµÙˆØ±ØªÙƒ Ø§Ù„Ø±Ù…Ø²ÙŠØ©</h1>
            </header>
            
            <div class="avatar-selection">
                <img src="https://api.dicebear.com/7.x/bottts/svg?seed=Cleo" class="avatar" data-avatar="1">
                <img src="https://api.dicebear.com/7.x/bottts/svg?seed=Max" class="avatar" data-avatar="2">
                <img src="https://api.dicebear.com/7.x/bottts/svg?seed=Jack" class="avatar" data-avatar="3">
                <img src="https://api.dicebear.com/7.x/bottts/svg?seed=Leo" class="avatar" data-avatar="4">
                <img src="https://api.dicebear.com/7.x/bottts/svg?seed=Milo" class="avatar" data-avatar="5">
                <img src="https://api.dicebear.com/7.x/bottts/svg?seed=Zoe" class="avatar" data-avatar="6">
            </div>
            
            <div class="form-group">
                <label for="player-name">Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨:</label>
                <input type="text" id="player-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">
            </div>
            
            <div class="form-group">
                <label for="player-id">Ù…Ø¹Ø±Ù Ø§Ù„Ù„Ø§Ø¹Ø¨:</label>
                <input type="text" id="player-id" class="player-id" readonly>
            </div>
            
            <div style="text-align: center;">
                <button id="confirm-player" class="btn">ØªØ£ÙƒÙŠØ¯</button>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª -->
        <div id="instructions" class="screen">
            <header>
                <h1>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„Ø¹Ø¨</h1>
            </header>
            
            <div class="instructions-content">
                <p>âœ… Ø§ÙƒØ³Ø¨ +100 Ù†Ù‚Ø·Ø© Ù…Ø¹ ÙƒÙ„ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©ØŒ ÙˆØ®Ø³Ø± -100 Ù†Ù‚Ø·Ø© Ù…Ø¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø©</p>
                <p>â±ï¸ Ù„Ø¯ÙŠÙƒ ÙˆÙ‚Øª Ù…Ø­Ø¯Ø¯ Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ ÙƒÙ„ Ø³Ø¤Ø§Ù„</p>
                <p>ğŸ›¡ï¸ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª Ø¨ØªÙƒÙ„ÙØ© 100 Ù†Ù‚Ø·Ø© Ù„ÙƒÙ„ Ù…Ø³Ø§Ø¹Ø¯Ø©</p>
                <p>âŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø±ØªÙƒØ§Ø¨ 3 Ø£Ø®Ø·Ø§Ø¡ ÙÙ‚Ø· Ù‚Ø¨Ù„ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø©</p>
                <p>âš¡ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø±Ø© ÙˆØ§Ø®ØªØ¨Ø§Ø± Ù†ÙØ³Ùƒ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±</p>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button id="start-quiz" class="btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
        <div id="question-screen" class="screen">
            <div class="question-header">
                <button id="end-quiz" class="btn btn-danger">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
                <button id="toggle-theme" class="btn">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø±</button>
            </div>
            
            <div class="level-progress">
                <div class="level-segment level-easy">Ø³Ù‡Ù„</div>
                <div class="level-segment level-medium">Ù…ØªÙˆØ³Ø·</div>
                <div class="level-segment level-hard">ØµØ¹Ø¨</div>
                <div class="level-segment level-impossible">Ù…Ø³ØªØ­ÙŠÙ„</div>
            </div>
            
            <div class="timer-container">
                <div class="timer-bar"></div>
            </div>
            
            <div class="player-info">
                <img id="current-avatar" class="player-avatar" src="">
                <div>
                    <h3 id="current-player-name"></h3>
                    <p id="current-player-id"></p>
                </div>
            </div>
            
            <div class="player-stats">
                <div class="stat">
                    <div class="stat-value" id="points">100</div>
                    <div>Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="skips">0</div>
                    <div>Ù…Ø±Ø§Øª Ø§Ù„ØªØ®Ø·ÙŠ</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="errors">0/3</div>
                    <div>Ø§Ù„Ø£Ø®Ø·Ø§Ø¡</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="level">1</div>
                    <div>Ø§Ù„Ù…Ø³ØªÙˆÙ‰</div>
                </div>
            </div>
            
            <div class="question-container">
                <div class="question-text" id="question-text"></div>
                <div class="options-container" id="options-container"></div>
            </div>
            
            <div class="help-buttons">
                <div class="help-btn" id="freeze-time">
                    <span>â±ï¸</span>
                    <span>ØªØ¬Ù…ÙŠØ¯ Ø§Ù„ÙˆÙ‚Øª</span>
                    <small>100 Ù†Ù‚Ø·Ø©</small>
                </div>
                <div class="help-btn" id="fifty-fifty">
                    <span>5ï¸âƒ£0ï¸âƒ£</span>
                    <span>Ø­Ø°Ù Ø¥Ø¬Ø§Ø¨ØªÙŠÙ†</span>
                    <small>100 Ù†Ù‚Ø·Ø©</small>
                </div>
                <div class="help-btn" id="skip-question">
                    <span>â­ï¸</span>
                    <span>ØªØ®Ø·ÙŠ Ø§Ù„Ø³Ø¤Ø§Ù„</span>
                    <small>100 Ù†Ù‚Ø·Ø©</small>
                </div>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
        <div id="results-screen" class="screen">
            <header>
                <h1>Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h1>
            </header>
            
            <div class="results-container">
                <div class="achievement-badge">ğŸ†</div>
                
                <div class="results-stats">
                    <div class="result-stat">
                        <div>Ø§Ù„Ø§Ø³Ù…</div>
                        <div class="result-stat-value" id="result-name"></div>
                    </div>
                    <div class="result-stat">
                        <div>Ø§Ù„Ù…Ø¹Ø±Ù</div>
                        <div class="result-stat-value" id="result-id"></div>
                    </div>
                    <div class="result-stat">
                        <div>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©</div>
                        <div class="result-stat-value" id="correct-answers"></div>
                    </div>
                    <div class="result-stat">
                        <div>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø©</div>
                        <div class="result-stat-value" id="wrong-answers"></div>
                    </div>
                    <div class="result-stat">
                        <div>Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„ØªØ®Ø·ÙŠ</div>
                        <div class="result-stat-value" id="total-skips"></div>
                    </div>
                    <div class="result-stat">
                        <div>Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</div>
                        <div class="result-stat-value" id="final-points"></div>
                    </div>
                    <div class="result-stat">
                        <div>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚</div>
                        <div class="result-stat-value" id="time-spent">00:00</div>
                    </div>
                    <div class="result-stat">
                        <div>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø°ÙŠ ÙˆØµÙ„Øª Ø¥Ù„ÙŠÙ‡</div>
                        <div class="result-stat-value" id="final-level"></div>
                    </div>
                </div>
                
                <div class="performance-bar">
                    <div class="performance-fill" id="performance-fill"></div>
                </div>
                
                <div id="performance-text" style="margin-bottom: 20px;">Ø£Ø¯Ø§Ø¡ Ø¬ÙŠØ¯</div>
                
                <div class="social-share">
                    <a href="https://x.com/_MS_AbuQusay?t=Tv0klH2PdnBYFHj_G8uIEA&s=09" target="_blank" class="btn">Ø´Ø§Ø±Ùƒ Ø¹Ù„Ù‰ X</a>
                    <a href="https://www.instagram.com/ms_abuqusay?igsh=MXc2ZWptd2FkamN0" target="_blank" class="btn">Ø´Ø§Ø±Ùƒ Ø¹Ù„Ù‰ Instagram</a>
                </div>
                
                <div style="margin-top: 20px;">
                    <button id="view-leaderboard" class="btn">Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø©</button>
                    <button id="play-again" class="btn">Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
                </div>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø© -->
        <div id="leaderboard-screen" class="screen">
            <header>
                <h1>Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø©</h1>
            </header>
            
            <div id="leaderboard-container">
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                            <th>Ø§Ù„Ø§Ø³Ù…</th>
                            <th>Ø§Ù„Ù…Ø¹Ø±Ù</th>
                            <th>Ø§Ù„Ù…Ø³ØªÙˆÙ‰</th>
                            <th>Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboard-body">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="back-to-results" class="btn">Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬ -->
    <div id="exit-modal" class="screen" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background-color: white; padding: 20px; border-radius: 10px; text-align: center; max-width: 400px;">
            <h2>Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</h2>
            <p>Ø³ÙŠØªÙ… Ø­ÙØ¸ Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©. Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ</p>
            <div style="margin-top: 20px;">
                <button id="confirm-exit" class="btn btn-danger">Ù†Ø¹Ù…</button>
                <button id="cancel-exit" class="btn">Ù„Ø§</button>
            </div>
        </div>
    </div>

    <!-- Ø¹Ù†ØµØ± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div id="notification" class="notification"></div>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        let player = {
            name: '',
            id: '',
            avatar: '',
            points: 100,
            correctAnswers: 0,
            wrongAnswers: 0,
            skips: 0,
            errors: 0,
            level: 1,
            startTime: null,
            timeSpent: 0,
            helpsUsed: 0
        };

        let questions = [];
        let currentQuestion = 0;
        let timer;
        let timeLeft = 30;
        let gameActive = false;
        let leaderboard = [];

        // Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© (Ø³Ù‡Ù„Ø©)
        const easyQuestions = [
            {
                question: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ",
                options: ["Ø§Ù„Ø±ÙŠØ§Ø¶", "Ø¬Ø¯Ø©", "Ù…ÙƒØ©", "Ø§Ù„Ø¯Ù…Ø§Ù…"],
                correct: 0
            },
            {
                question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ØŸ",
                options: ["5 Ø£ÙŠØ§Ù…", "6 Ø£ÙŠØ§Ù…", "7 Ø£ÙŠØ§Ù…", "8 Ø£ÙŠØ§Ù…"],
                correct: 2
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ÙƒÙˆÙƒØ¨ Ø§Ù„Ø°ÙŠ ÙŠØ¹Ø±Ù Ø¨Ø§Ù„ÙƒÙˆÙƒØ¨ Ø§Ù„Ø£Ø­Ù…Ø±ØŸ",
                options: ["Ø§Ù„Ø£Ø±Ø¶", "Ø§Ù„Ù…Ø±ÙŠØ®", "Ø§Ù„Ù…Ø´ØªØ±ÙŠ", "Ø§Ù„Ø²Ù‡Ø±Ø©"],
                correct: 1
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø£Ø·ÙˆÙ„ Ù†Ù‡Ø± ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ",
                options: ["Ø§Ù„Ù†ÙŠÙ„", "Ø§Ù„Ø£Ù…Ø§Ø²ÙˆÙ†", "Ø§Ù„Ù…ÙŠØ³ÙŠØ³ÙŠØ¨ÙŠ", "Ø§Ù„Ø¯Ø§Ù†ÙˆØ¨"],
                correct: 0
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ù…Ø¹Ø±ÙˆÙ Ø¨Ù„Ù‚Ø¨ Ù…Ù„Ùƒ Ø§Ù„ØºØ§Ø¨Ø©ØŸ",
                options: ["Ø§Ù„ÙÙŠÙ„", "Ø§Ù„Ø£Ø³Ø¯", "Ø§Ù„Ù†Ù…Ø±", "Ø§Ù„Ø¯Ø¨"],
                correct: 1
            }
        ];

        const mediumQuestions = [
            {
                question: "ÙÙŠ Ø£ÙŠ Ø¹Ø§Ù… ØªÙ… ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ",
                options: ["1932", "1945", "1950", "1927"],
                correct: 0
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ø§Ù„Ø°ÙŠ Ø±Ù…Ø²Ù‡ 'O'ØŸ",
                options: ["Ø°Ù‡Ø¨", "Ø£ÙˆÙƒØ³Ø¬ÙŠÙ†", ÙØ¶Ø©", "Ø­Ø¯ÙŠØ¯"],
                correct: 1
            },
            {
                question: "Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ù„Ù ÙƒØªØ§Ø¨ 'Ø§Ù„Ø¨Ø¤Ø³Ø§Ø¡'ØŸ",
                options: ["ØªÙˆÙ„Ø³ØªÙˆÙŠ", "ÙÙŠÙƒØªÙˆØ± Ù‡ÙˆØ¬Ùˆ", "Ø´ÙƒØ³Ø¨ÙŠØ±", "Ø¯ÙŠØ³ØªÙˆÙØ³ÙƒÙŠ"],
                correct: 1
            },
            {
                question: "Ù…Ø§ Ù‡ÙŠ Ø£ØµØºØ± Ù‚Ø§Ø±Ø© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ",
                options: ["Ø£ÙØ±ÙŠÙ‚ÙŠØ§", "Ø£ÙˆØ±ÙˆØ¨Ø§", "Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§", "Ø£Ù†ØªØ§Ø±ÙƒØªÙŠÙƒØ§"],
                correct: 2
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø£Ø³Ø±Ø¹ Ø­ÙŠÙˆØ§Ù† Ø¨Ø±ÙŠØŸ",
                options: ["Ø§Ù„ÙÙ‡Ø¯", "Ø§Ù„Ø£Ø³Ø¯", "Ø§Ù„ØºØ²Ø§Ù„", "Ø§Ù„Ù†Ù…Ø±"],
                correct: 0
            }
        ];

        const hardQuestions = [
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø£Ø¹Ù…Ù‚ Ù…Ø­ÙŠØ· ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ",
                options: ["Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù‡Ø§Ø¯Ø¦", "Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ø£Ø·Ù„Ø³ÙŠ", "Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù‡Ù†Ø¯ÙŠ", "Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù…ØªØ¬Ù…Ø¯ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ"],
                correct: 0
            },
            {
                question: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø°ÙŠ Ø§ÙƒØªØ´Ù Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ© Ø§Ù„Ø£Ø±Ø¶ÙŠØ©ØŸ",
                options: ["Ø£ÙŠÙ†Ø´ØªØ§ÙŠÙ†", "Ù†ÙŠÙˆØªÙ†", "ØºØ§Ù„ÙŠÙ„ÙŠÙˆ", "ÙƒÙˆØ¨Ø±Ù†ÙŠÙƒÙˆØ³"],
                correct: 1
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ø¹Ø¯Ù† Ø§Ù„Ø³Ø§Ø¦Ù„ ÙÙŠ Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ø§Ù„ØºØ±ÙØ©ØŸ",
                options: ["Ø§Ù„Ø°Ù‡Ø¨", "Ø§Ù„ÙØ¶Ø©", "Ø§Ù„Ø²Ø¦Ø¨Ù‚", "Ø§Ù„Ù†Ø­Ø§Ø³"],
                correct: 2
            },
            {
                question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØŸ",
                options: ["92", "118", "108", "124"],
                correct: 1
            },
            {
                question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù„ØºØ© Ø§Ù„ØªÙŠ ØªØªØ­Ø¯Ø« Ø¨Ù‡Ø§ Ø£ÙƒØ¨Ø± Ø¹Ø¯Ø¯ Ù…Ù† Ø§Ù„Ø´Ø¹ÙˆØ¨ ÙƒÙ„ØºØ© Ø£Ù…ØŸ",
                options: ["Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", "Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠØ©", "Ø§Ù„Ù…Ù†Ø¯Ø±ÙŠÙ† (Ø§Ù„ØµÙŠÙ†ÙŠØ©)", "Ø§Ù„Ù‡Ù†Ø¯ÙŠØ©"],
                correct: 2
            }
        ];

        const impossibleQuestions = [
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø£ØµØºØ± Ø¹Ø¯Ø¯ Ø£ÙˆÙ„ÙŠØŸ",
                options: ["0", "1", "2", "3"],
                correct: 2
            }
        ];

        // DOM Elements
        const screens = {
            splash: document.getElementById('splash-screen'),
            playerSetup: document.getElementById('player-setup'),
            instructions: document.getElementById('instructions'),
            questionScreen: document.getElementById('question-screen'),
            resultsScreen: document.getElementById('results-screen'),
            leaderboardScreen: document.getElementById('leaderboard-screen')
        };

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
        function initGame() {
            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„Ù„Ø§Ø¹Ø¨
            document.getElementById('player-id').value = 'PLR' + Math.floor(1000 + Math.random() * 9000);
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ù„Ù„Ø£Ø­Ø¯Ø§Ø«
            document.getElementById('start-btn').addEventListener('click', () => showScreen('playerSetup'));
            
            const avatars = document.querySelectorAll('.avatar');
            avatars.forEach(avatar => {
                avatar.addEventListener('click', () => {
                    avatars.forEach(a => a.classList.remove('selected'));
                    avatar.classList.add('selected');
                });
            });
            
            document.getElementById('confirm-player').addEventListener('click', confirmPlayer);
            document.getElementById('start-quiz').addEventListener('click', startQuiz);
            document.getElementById('end-quiz').addEventListener('click', showExitModal);
            document.getElementById('confirm-exit').addEventListener('click', endQuiz);
            document.getElementById('cancel-exit').addEventListener('click', hideExitModal);
            document.getElementById('toggle-theme').addEventListener('click', toggleTheme);
            document.getElementById('view-leaderboard').addEventListener('click', showLeaderboard);
            document.getElementById('back-to-results').addEventListener('click', () => showScreen('resultsScreen'));
            document.getElementById('play-again').addEventListener('click', resetGame);
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª
            document.getElementById('freeze-time').addEventListener('click', freezeTime);
            document.getElementById('fifty-fifty').addEventListener('click', fiftyFifty);
            document.getElementById('skip-question').addEventListener('click', skipQuestion);
            
            // ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø©
            loadLeaderboard();
        }

        function confirmPlayer() {
            const selectedAvatar = document.querySelector('.avatar.selected');
            const playerName = document.getElementById('player-name').value;
            
            if (!selectedAvatar || !playerName) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…', 'error');
                return;
            }
            
            player.name = playerName;
            player.id = document.getElementById('player-id').value;
            player.avatar = selectedAvatar.src;
            
            showScreen('instructions');
        }

        function startQuiz() {
            player.startTime = new Date();
            showScreen('questionScreen');
            loadQuestion();
            startTimer();
            gameActive = true;
        }

        function loadQuestion() {
            // ØªØ­Ø¯ÙŠØ¯ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø© Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ
            let questionSet;
            if (currentQuestion < 5) {
                questionSet = easyQuestions;
                player.level = 1;
            } else if (currentQuestion < 10) {
                questionSet = mediumQuestions;
                player.level = 2;
            } else if (currentQuestion < 15) {
                questionSet = hardQuestions;
                player.level = 3;
            } else {
                questionSet = impossibleQuestions;
                player.level = 4;
            }
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¶Ù…Ù† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
            const questionIndex = currentQuestion % 5;
            const question = questionSet[questionIndex];
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('current-avatar').src = player.avatar;
            document.getElementById('current-player-name').textContent = player.name;
            document.getElementById('current-player-id').textContent = player.id;
            document.getElementById('points').textContent = player.points;
            document.getElementById('skips').textContent = player.skips;
            document.getElementById('errors').textContent = `${player.errors}/3`;
            document.getElementById('level').textContent = player.level;
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
            updateProgressBar();
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn';
                button.textContent = option;
                button.addEventListener('click', () => checkAnswer(index));
                optionsContainer.appendChild(button);
            });
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
            timeLeft = 30;
            updateTimerDisplay();
        }

        function checkAnswer(selectedIndex) {
            clearInterval(timer);
            
            let questionSet;
            if (currentQuestion < 5) {
                questionSet = easyQuestions;
            } else if (currentQuestion < 10) {
                questionSet = mediumQuestions;
            } else if (currentQuestion < 15) {
                questionSet = hardQuestions;
            } else {
                questionSet = impossibleQuestions;
            }
            
            const questionIndex = currentQuestion % 5;
            const correctIndex = questionSet[questionIndex].correct;
            
            const options = document.querySelectorAll('.option-btn');
            
            if (selectedIndex === correctIndex) {
                // Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©
                options[selectedIndex].classList.add('correct');
                player.points += 100;
                player.correctAnswers++;
                showNotification('Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! +100 Ù†Ù‚Ø·Ø©', 'success');
            } else {
                // Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©
                options[selectedIndex].classList.add('wrong');
                options[correctIndex].classList.add('correct');
                player.points -= 100;
                player.wrongAnswers++;
                player.errors++;
                showNotification('Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! -100 Ù†Ù‚Ø·Ø©', 'error');
                
                if (player.errors >= 3) {
                    setTimeout(endQuiz, 1500);
                    return;
                }
            }
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ±
            setTimeout(nextQuestion, 1500);
        }

        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion >= 16) {
                endQuiz();
                return;
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ Ø§Ù†ØªÙ‚Ù„Ù†Ø§ Ø¥Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯
            if (currentQuestion === 5 || currentQuestion === 10 || currentQuestion === 15) {
                showLevelUpMessage();
            }
            
            loadQuestion();
            startTimer();
        }

        function showLevelUpMessage() {
            let message = "";
            if (currentQuestion === 5) {
                message = "Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…ØªÙˆØ³Ø·! ğŸ”µ Ø§Ø³ØªØ¹Ø¯ Ù„Ù„ØªØ­Ø¯ÙŠ!";
            } else if (currentQuestion === 10) {
                message = "Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹Ø¨! ğŸŸ  Ø§Ø³ØªØ¹Ø¯ Ù„Ù„ØªØ­Ø¯ÙŠ!";
            } else if (currentQuestion === 15) {
                message = "Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø³ØªØ­ÙŠÙ„! ğŸ”´ Ø§Ø³ØªØ¹Ø¯ Ù„Ù„ØªØ­Ø¯ÙŠ!";
            }
            
            showNotification(message, 'info');
        }

        function startTimer() {
            clearInterval(timer);
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timeOut();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const timerBar = document.querySelector('.timer-bar');
            const percentage = (timeLeft / 30) * 100;
            timerBar.style.width = `${percentage}%`;
            
            // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù…Ø¤Ù‚Øª Ø­Ø³Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
            if (timeLeft <= 10) {
                timerBar.style.background = 'linear-gradient(to right, #f44336, #ff9800)';
            } else {
                timerBar.style.background = 'linear-gradient(to right, var(--primary-color), var(--secondary-color))';
            }
        }

        function timeOut() {
            const options = document.querySelectorAll('.option-btn');
            let questionSet;
            
            if (currentQuestion < 5) {
                questionSet = easyQuestions;
            } else if (currentQuestion < 10) {
                questionSet = mediumQuestions;
            } else if (currentQuestion < 15) {
                questionSet = hardQuestions;
            } else {
                questionSet = impossibleQuestions;
            }
            
            const questionIndex = currentQuestion % 5;
            const correctIndex = questionSet[questionIndex].correct;
            
            options[correctIndex].classList.add('correct');
            
            player.points -= 100;
            player.wrongAnswers++;
            player.errors++;
            
            showNotification('Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! -100 Ù†Ù‚Ø·Ø©', 'error');
            
            if (player.errors >= 3) {
                setTimeout(endQuiz, 1500);
                return;
            }
            
            setTimeout(nextQuestion, 1500);
        }

        function freezeTime() {
            if (player.points < 100) {
                showNotification('Ø§Ù„Ù†Ù‚Ø§Ø· ØºÙŠØ± ÙƒØ§ÙÙŠØ© âŒ', 'error');
                return;
            }
            
            player.points -= 100;
            player.helpsUsed++;
            timeLeft += 10;
            updateTimerDisplay();
            
            document.getElementById('freeze-time').classList.add('disabled');
            showNotification('ØªÙ… ØªØ¬Ù…ÙŠØ¯ Ø§Ù„ÙˆÙ‚Øª Ù„Ù…Ø¯Ø© 10 Ø«ÙˆØ§Ù†Ù', 'success');
        }

        function fiftyFifty() {
            if (player.points < 100) {
                showNotification('Ø§Ù„Ù†Ù‚Ø§Ø· ØºÙŠØ± ÙƒØ§ÙÙŠØ© âŒ', 'error');
                return;
            }
            
            let questionSet;
            if (currentQuestion < 5) {
                questionSet = easyQuestions;
            } else if (currentQuestion < 10) {
                questionSet = mediumQuestions;
            } else if (currentQuestion < 15) {
                questionSet = hardQuestions;
            } else {
                questionSet = impossibleQuestions;
            }
            
            const questionIndex = currentQuestion % 5;
            const correctIndex = questionSet[questionIndex].correct;
            
            const options = document.querySelectorAll('.option-btn');
            let wrongOptions = [];
            
            for (let i = 0; i < options.length; i++) {
                if (i !== correctIndex) {
                    wrongOptions.push(i);
                }
            }
            
            // Ø§Ø®ØªÙŠØ§Ø± Ø®ÙŠØ§Ø±ÙŠÙ† Ø®Ø§Ø·Ø¦ÙŠÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠÙ‹Ø§ Ù„Ø¥Ø²Ø§Ù„ØªÙ‡Ù…Ø§
            const removeCount = 2;
            for (let i = 0; i < removeCount; i++) {
                const randomIndex = Math.floor(Math.random() * wrongOptions.length);
                const optionToRemove = wrongOptions[randomIndex];
                options[optionToRemove].style.visibility = 'hidden';
                wrongOptions.splice(randomIndex, 1);
            }
            
            player.points -= 100;
            player.helpsUsed++;
            
            document.getElementById('fifty-fifty').classList.add('disabled');
            showNotification('ØªÙ… Ø­Ø°Ù Ø¥Ø¬Ø§Ø¨ØªÙŠÙ† Ø®Ø§Ø·Ø¦ØªÙŠÙ†', 'success');
        }

        function skipQuestion() {
            const skipCost = 100 + (player.skips * 50);
            
            if (player.points < skipCost) {
                showNotification('Ø§Ù„Ù†Ù‚Ø§Ø· ØºÙŠØ± ÙƒØ§ÙÙŠØ© âŒ', 'error');
                return;
            }
            
            player.points -= skipCost;
            player.skips++;
            
            showNotification(`ØªÙ… ØªØ®Ø·ÙŠ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨ØªÙƒÙ„ÙØ© ${skipCost} Ù†Ù‚Ø·Ø©`, 'info');
            nextQuestion();
        }

        function endQuiz() {
            clearInterval(timer);
            gameActive = false;
            hideExitModal();
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚
            const endTime = new Date();
            player.timeSpent = Math.floor((endTime - player.startTime) / 1000);
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            document.getElementById('result-name').textContent = player.name;
            document.getElementById('result-id').textContent = player.id;
            document.getElementById('correct-answers').textContent = player.correctAnswers;
            document.getElementById('wrong-answers').textContent = player.wrongAnswers;
            document.getElementById('total-skips').textContent = player.skips;
            document.getElementById('final-points').textContent = player.points;
            document.getElementById('final-level').textContent = player.level;
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª Ø¥Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ Ø¯Ù‚Ø§Ø¦Ù‚:Ø«ÙˆØ§Ù†ÙŠ
            const minutes = Math.floor(player.timeSpent / 60);
            const seconds = player.timeSpent % 60;
            document.getElementById('time-spent').textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // ØªØ­Ø¯ÙŠØ¯ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù„Ø§Ø¹Ø¨
            const performanceFill = document.getElementById('performance-fill');
            const performanceText = document.getElementById('performance-text');
            
            let performancePercentage = 0;
            let performanceRating = '';
            
            if (player.points >= 500) {
                performancePercentage = 100;
                performanceRating = 'Ù…Ù…ØªØ§Ø²!';
            } else if (player.points >= 300) {
                performancePercentage = 75;
                performanceRating = 'Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§';
            } else if (player.points >= 100) {
                performancePercentage = 50;
                performanceRating = 'Ø¬ÙŠØ¯';
            } else if (player.points >= 0) {
                performancePercentage = 25;
                performanceRating = 'Ø³ÙŠØ¦';
            } else {
                performancePercentage = 0;
                performanceRating = 'Ø³ÙŠØ¦ Ø¬Ø¯Ù‹Ø§';
            }
            
            performanceFill.style.width = `${performancePercentage}%`;
            performanceText.textContent = performanceRating;
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¥Ù„Ù‰ Google Sheets
            submitResults();
            
            showScreen('resultsScreen');
        }

        function submitResults() {
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©
            leaderboard.push({
                name: player.name,
                id: player.id,
                level: player.level,
                points: player.points,
                time: player.timeSpent
            });
            
            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù„ÙˆØ­Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
            leaderboard.sort((a, b) => b.points - a.points);
            
            // Ø­ÙØ¸ Ø§Ù„Ù„ÙˆØ­Ø© ÙÙŠ localStorage
            localStorage.setItem('quizLeaderboard', JSON.stringify(leaderboard));
            
            // Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Google App Script
            // const scriptURL = 'https://script.google.com/macros/s/AKfycbw68QqjhU0eqOszPpLBm0tXPtjaSV000kBfOWiorLk2lFm45ud3do-f5PMCy9b0LSez/exec';
            
            // const data = {
            //     deviceId: generateDeviceId(),
            //     playerName: player.name,
            //     playerId: player.id,
            //     startTime: player.startTime.toISOString(),
            //     duration: player.timeSpent,
            //     status: 'completed',
            //     helpsUsed: player.helpsUsed,
            //     finalLevel: player.level,
            //     points: player.points
            // };
            
            // fetch(scriptURL, {
            //     method: 'POST',
            //     mode: 'no-cors',
            //     headers: {
            //         'Content-Type': 'application/json',
            //     },
            //     body: JSON.stringify(data)
            // });
        }

        function generateDeviceId() {
            return 'DEV' + Math.floor(10000 + Math.random() * 90000);
        }

        function loadLeaderboard() {
            const savedLeaderboard = localStorage.getItem('quizLeaderboard');
            if (savedLeaderboard) {
                leaderboard = JSON.parse(savedLeaderboard);
            }
        }

        function showLeaderboard() {
            const leaderboardBody = document.getElementById('leaderboard-body');
            leaderboardBody.innerHTML = '';
            
            leaderboard.slice(0, 10).forEach((entry, index) => {
                const row = document.createElement('tr');
                
                let rankClass = '';
                if (index === 0) rankClass = 'rank-1';
                else if (index === 1) rankClass = 'rank-2';
                else if (index === 2) rankClass = 'rank-3';
                
                // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª Ø¥Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ Ø¯Ù‚Ø§Ø¦Ù‚:Ø«ÙˆØ§Ù†ÙŠ
                const minutes = Math.floor(entry.time / 60);
                const seconds = entry.time % 60;
                const timeFormatted = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                row.innerHTML = `
                    <td class="${rankClass}">${index + 1}</td>
                    <td>${entry.name}</td>
                    <td>${entry.id}</td>
                    <td>${entry.level}</td>
                    <td>${entry.points}</td>
                `;
                
                leaderboardBody.appendChild(row);
            });
            
            showScreen('leaderboardScreen');
        }

        function resetGame() {
            player = {
                name: player.name,
                id: player.id,
                avatar: player.avatar,
                points: 100,
                correctAnswers: 0,
                wrongAnswers: 0,
                skips: 0,
                errors: 0,
                level: 1,
                startTime: null,
                timeSpent: 0,
                helpsUsed: 0
            };
            
            currentQuestion = 0;
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª
            document.getElementById('freeze-time').classList.remove('disabled');
            document.getElementById('fifty-fifty').classList.remove('disabled');
            
            showScreen('questionScreen');
            startQuiz();
        }

        function showScreen(screenName) {
            for (const screen in screens) {
                screens[screen].classList.remove('active');
            }
            screens[screenName].classList.add('active');
        }

        function showExitModal() {
            document.getElementById('exit-modal').style.display = 'flex';
        }

        function hideExitModal() {
            document.getElementById('exit-modal').style.display = 'none';
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
        }

        function updateProgressBar() {
            const segments = document.querySelectorAll('.level-segment');
            
            segments.forEach(segment => {
                segment.style.opacity = '0.6';
            });
            
            if (player.level >= 1) segments[0].style.opacity = '1';
            if (player.level >= 2) segments[1].style.opacity = '1';
            if (player.level >= 3) segments[2].style.opacity = '1';
            if (player.level >= 4) segments[3].style.opacity = '1';
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('DOMContentLoaded', initGame);
    </script>

    <script>
        // Google App Script Code (Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ù…Ø´Ø±ÙˆØ¹ Ù…Ù†ÙØµÙ„)
        /*
        function doPost(e) {
            const sheet = SpreadsheetApp.openById('YOUR_SHEET_ID').getActiveSheet();
            const data = JSON.parse(e.postData.contents);
            
            sheet.appendRow([
                new Date(),
                data.deviceId,
                data.playerName,
                data.playerId,
                data.startTime,
                data.duration,
                data.status,
                data.helpsUsed,
                data.finalLevel,
                data.points
            ]);
            
            return ContentService.createTextOutput(JSON.stringify({result: 'success'})).setMimeType(ContentService.MimeType.JSON);
        }
        
        function doGet() {
            const sheet = SpreadsheetApp.openById('YOUR_SHEET_ID').getSheetByName('Leaderboard');
            const data = sheet.getDataRange().getValues();
            
            const leaderboardData = data.slice(1).map(row => ({
                name: row[2],
                id: row[3],
                level: row[8],
                points: row[9],
                time: row[5]
            })).sort((a, b) => b.points - a.points);
            
            return ContentService.createTextOutput(JSON.stringify(leaderboardData)).setMimeType(ContentService.MimeType.JSON);
        }
        */
    </script>
</body>
</html>
