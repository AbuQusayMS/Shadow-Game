<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ูุณุงุจูุฉ ุงููุนูููุงุช</title>

    <!-- Apps Script endpoint (ููุฌูุฏ ูู data attribute ูู body ุฃูุถุงู) -->
    <meta name="apps-script-endpoint" content="https://script.google.com/macros/s/AKfycbzB9cru35ndWmWYsEqe46NlrvZgj64HhCIZJ0j7SLln3VDSl2S7rAOMDGxLwEzR_ClS/exec">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<!-- ุฃุถูุช data-endpoint ูุณูููุฉ ุงููุตูู ูู ุงูุฌุงูุงุณูุฑุจุช -->
<body data-theme="dark" data-endpoint="https://script.google.com/macros/s/AKfycbzB9cru35ndWmWYsEqe46NlrvZgj64HhCIZJ0j7SLln3VDSl2S7rAOMDGxLwEzR_ClS/exec">
    <div id="toast-container" class="toast-container" aria-live="polite"></div>

    <!-- START SCREEN -->
    <div id="startScreen" class="screen active">
        <div class="content-box">
            <header class="screen-header" style="text-align:left;">
                <!-- ุงูุนููุงู ูุญุงุฐู ูููุณุงุฑ ุญุชู ูุน dir="rtl" -->
                <h1 class="game-title" style="display:flex;align-items:center;gap:12px;justify-content:flex-start;">
                    <i class="fas fa-brain" aria-hidden="true" style="color: #ff6b8b; font-size:1.6em;"></i>
                    <span style="display:inline-block;">
                        ูุณุงุจูุฉ ุงููุนูููุงุช
                        <br>
                        <small class="subtitle" style="display:block;font-weight:400;font-size:0.85rem;color:var(--muted)">ุงุฎุชุจุฑ ูุนูููุงุชู ุจูุฌููุนุฉ ุชุญุฏูุงุช ูุตูุฑุฉ ูููุชุนุฉ!</small>
                    </span>
                </h1>
            </header>
            
            <div class="description" role="region" aria-label="ูุตู ุงููุนุจุฉ">
                <p>ุงุฎุชุจุฑ ูุนูููุงุชู ูู ูุณุงุจูุฉ ุชูุงุนููุฉ ูุตูุฑุฉ โ ุฌูุน ููุงุทุ ุงุณุชุฎุฏู ุฃุฏูุงุช ุงููุณุงุนุฏุฉุ ูุชูุงูุณ ูููุตูู ุฅูู ููุญ ุงูุตุฏุงุฑุฉ.</p>
            </div>
            
            <div class="features" role="list" aria-label="ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ">
                <div class="feature" role="listitem">
                    <span class="feature-icon" aria-hidden="true">๐ฏ</span>
                    <span>ุงุฌูุน ุงูููุงุท ุจุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ โ ุชุญุตู +100 ููุทุฉ ููู ุฅุฌุงุจุฉ ุตุญูุญุฉ.</span>
                </div>
                <div class="feature" role="listitem">
                    <span class="feature-icon" aria-hidden="true">โก</span>
                    <span>ูุญุงููุงุช ูุฑูุฉ ููุฅุฌุงุจุฉ โ ุงููุญุงููุงุช ุบูุฑ ูุญุฏูุฏุฉ.</span>
                </div>
                <div class="feature" role="listitem">
                    <span class="feature-icon" aria-hidden="true">๐</span>
                    <span>ุงูุณุคุงู ุงููุณุชุญูู โ ูุฑุตุฉ ูุชุนููุถ ุงูุฎุณุงุฑุฉ.</span>
                </div>
            </div>
            
            <div class="support-info" role="note">
                <p>ูู ุญุงู ูุงุฌูุช ุฃู ูุดููุฉุ ุฑุงุณู ุงููุณุคูู ุนูู 
                    <!-- ุทุจููุง ุชุจุฏูู ุงูุฑูุงุจุท ุทุจูุงู ููุง ุทูุจุชู: ูููุฉ "ุฅูุณ" ุชุดูุฑ ูุตูุญุฉ ุฅูุณุชุบุฑุงูุ ููููุฉ "ุฅูุณุชุบุฑุงู" ุชุดูุฑ ูุตูุญุฉ X -->
                    <a href="https://www.instagram.com/ms_abuqusay?igsh=MXc2ZWptd2FkamN0" target="_blank" rel="noopener noreferrer">ุฅูุณ</a> 
                    ุฃู 
                    <a href="https://x.com/_MS_AbuQusay?t=xxNvSpL0aOdiKHUE6ZuM6A&s=09" target="_blank" rel="noopener noreferrer">ุฅูุณุชุบุฑุงู</a>.
                </p>
            </div>
            
            <div class="button-group" role="group" aria-label="ุฃุฒุฑุงุฑ ุงูุจุฏุงูุฉ">
                <button id="startPlayBtn" class="btn-main" aria-label="ุงุจุฏุฃ ุงููุนุจ ุงูุขู">
                    ุงุจุฏุฃ ุงููุนุจ ุงูุขู
                </button>
                <button id="showLeaderboardBtn" class="btn-secondary" aria-label="ุนุฑุถ ููุญุฉ ุงูุตุฏุงุฑุฉ">
                    ุงูุฅุญุตุงุฆูุงุช
                </button>
            </div>
        </div>
    </div>

    <!-- AVATAR SCREEN -->
    <div id="avatarScreen" class="screen" aria-hidden="true">
        <div class="content-box">
            <header class="screen-header" style="text-align:left;">
                <h2>ุงุฎุชุฑ ุตูุฑุชู ุงูุฑูุฒูุฉ</h2>
            </header>

            <!-- ูุนุงููุฉ ุฃูุจุฑ ุนูุฏ ุงููููู ููู ุงูุตูุฑุฉ -->
            <div class="avatar-preview" aria-hidden="true" style="margin-bottom:12px; text-align:center;">
                <img id="avatarPreview" src="" alt="ูุนุงููุฉ ุงูุตูุฑุฉ ุงูุฑูุฒูุฉ" style="width:120px;height:120px;border-radius:50%;object-fit:cover;display:none;">
            </div>
            
            <div class="avatar-grid" role="listbox" aria-label="ุฎูุงุฑุงุช ุงูุตูุฑ ุงูุฑูุฒูุฉ" tabindex="0" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:10px;max-height:320px;overflow:auto;padding:6px;">
                <!-- ุฃูุซูุฉ ุตูุฑ ุฑูุฒูุฉ ูุงุจูุฉ ููุชุญููู ุงูุจุทูุก (loading="lazy") -->
                <!-- ููู ุนูุตุฑ: data-avatar-id ูุชุญุฏูุฏ ุงููุนุฑูุ tabindex ูุชูููู ููุญุฉ ุงูููุงุชูุญ -->
                <button class="avatar-option" data-avatar-id="avatar_01" role="option" aria-pressed="false" tabindex="0">
                    <img class="avatar-img" src="https://i.pravatar.cc/150?img=1" loading="lazy" alt="ุฑูุฒูุฉ 1" style="width:72px;height:72px;border-radius:50%;object-fit:cover;">
                </button>
                <button class="avatar-option" data-avatar-id="avatar_02" role="option" aria-pressed="false" tabindex="0">
                    <img class="avatar-img" src="https://i.pravatar.cc/150?img=2" loading="lazy" alt="ุฑูุฒูุฉ 2" style="width:72px;height:72px;border-radius:50%;object-fit:cover;">
                </button>
                <button class="avatar-option" data-avatar-id="avatar_03" role="option" aria-pressed="false" tabindex="0">
                    <img class="avatar-img" src="https://i.pravatar.cc/150?img=3" loading="lazy" alt="ุฑูุฒูุฉ 3" style="width:72px;height:72px;border-radius:50%;object-fit:cover;">
                </button>
                <button class="avatar-option" data-avatar-id="avatar_04" role="option" aria-pressed="false" tabindex="0">
                    <img class="avatar-img" src="https://i.pravatar.cc/150?img=4" loading="lazy" alt="ุฑูุฒูุฉ 4" style="width:72px;height:72px;border-radius:50%;object-fit:cover;">
                </button>
                <button class="avatar-option" data-avatar-id="avatar_05" role="option" aria-pressed="false" tabindex="0">
                    <img class="avatar-img" src="https://i.pravatar.cc/150?img=5" loading="lazy" alt="ุฑูุฒูุฉ 5" style="width:72px;height:72px;border-radius:50%;object-fit:cover;">
                </button>
                <button class="avatar-option" data-avatar-id="avatar_06" role="option" aria-pressed="false" tabindex="0">
                    <img class="avatar-img" src="https://i.pravatar.cc/150?img=6" loading="lazy" alt="ุฑูุฒูุฉ 6" style="width:72px;height:72px;border-radius:50%;object-fit:cover;">
                </button>
                <button class="avatar-option" data-avatar-id="avatar_07" role="option" aria-pressed="false" tabindex="0">
                    <img class="avatar-img" src="https://i.pravatar.cc/150?img=7" loading="lazy" alt="ุฑูุฒูุฉ 7" style="width:72px;height:72px;border-radius:50%;object-fit:cover;">
                </button>
                <button class="avatar-option" data-avatar-id="avatar_08" role="option" aria-pressed="false" tabindex="0">
                    <img class="avatar-img" src="https://i.pravatar.cc/150?img=8" loading="lazy" alt="ุฑูุฒูุฉ 8" style="width:72px;height:72px;border-radius:50%;object-fit:cover;">
                </button>
            </div>
            
            <div class="button-group" style="margin-top:12px;">
                <button id="confirmAvatarBtn" class="btn-main" disabled aria-disabled="true" aria-label="ุงูุชุงูู">
                    ุงูุชุงูู
                </button>
            </div>
        </div>
    </div>

    <!-- NAME ENTRY -->
    <div id="nameEntry" class="screen" aria-hidden="true">
        <div class="content-box">
            <header class="screen-header" style="text-align:left;">
                <h2>ูุง ูู ุงุณููุ</h2>
            </header>
            
            <div class="input-group">
                <!-- ุชุญูู ุฃุณุงุณู: minlength=3 maxlength=15 -->
                <input type="text" id="nameInput" placeholder="ุงูุชุจ ุงุณูู ููุง" maxlength="15" minlength="3" required aria-required="true" aria-describedby="nameError">
                <div id="nameError" class="error-message" role="alert" aria-live="polite"></div>
            </div>
            
            <div class="button-group">
                <button id="confirmNameBtn" class="btn-main" aria-label="ููุงูู" disabled>
                    ููุงูู
                </button>
            </div>
        </div>
    </div>

    <!-- GAME CONTAINER -->
    <div id="gameContainer" class="screen" aria-hidden="true">
        <div class="top-bar" role="toolbar" aria-label="ุดุฑูุท ุงูุฃุฏูุงุช ุงูุนููู" style="display:flex;align-items:center;gap:8px;justify-content:space-between;">
            <div style="display:flex;gap:6px;align-items:center;">
                <button id="endGameBtn" class="btn-icon" aria-label="ุฅููุงุก ุงููุณุงุจูุฉ" title="ุฅููุงุก ุงููุณุงุจูุฉ">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
                <button id="impossibleQuestionBtn" class="btn-icon" aria-label="ุงูุณุคุงู ุงููุณุชุญูู" title="ุงูุณุคุงู ุงููุณุชุญูู">
                    <i class="fas fa-crown" aria-hidden="true"></i>
                </button>
            </div>
            
            <div class="progress-container" style="flex:1;margin:0 12px;">
                <h3 id="questionCounter" style="text-align:center;margin:0;">ุงูุณุคุงู 1 ูู 15</h3>
                <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" style="height:8px;background:#eee;border-radius:6px;overflow:hidden;">
                    <div class="progress-fill" style="width:0%;height:100%;"></div>
                </div>
            </div>
            
            <button id="themeToggleBtn" class="btn-icon" aria-label="ุชุจุฏูู ุงููุถุน" title="ุชุจุฏูู ุงููุถุน">
                <i class="fas fa-moon" aria-hidden="true"></i>
            </button>
        </div>
        
        <div class="player-card" style="display:flex;align-items:center;gap:12px;margin:12px 0;">
            <img id="playerAvatar" src="" alt="ุงูุตูุฑุฉ ุงูุฑูุฒูุฉ" style="width:72px;height:72px;border-radius:50%;object-fit:cover;">
            <div class="player-info">
                <div id="playerName">ุงููุงุนุจ</div>
                <div class="player-stats" style="font-size:0.95rem;color:var(--muted)">
                    <div>ุงูููุงุท: <span id="currentScore">100</span></div>
                    <div>ูุฑุงุช ุงูุชุฎุทู ุงููุณุชุฎุฏูุฉ: <span id="skipCount">0</span> โ ุงูุชูููุฉ ุงูุญุงููุฉ: <span id="skipCost">100</span> ููุทุฉ</div>
                </div>
            </div>
        </div>

        <div class="helpers-container" role="group" aria-label="ุฃุฏูุงุช ุงููุณุงุนุฏุฉ" style="display:flex;gap:8px;flex-wrap:wrap;">
            <button class="helper-btn" data-type="fiftyFifty" aria-label="ูฅู:ูฅู - ุชูููุฉ 100 ููุทุฉ">
                <div class="helper-icon">50:50</div>
                <div class="helper-cost">100 ููุทุฉ</div>
            </button>
            
            <button class="helper-btn" data-type="freezeTime" aria-label="ุชุฌููุฏ ุงูููุช - ุชูููุฉ 100 ููุทุฉ">
                <div class="helper-icon">โฑ๏ธ</div>
                <div class="helper-cost">100 ููุทุฉ</div>
            </button>
            
            <button class="helper-btn" data-type="changeQuestion" aria-label="ุชุบููุฑ ุงูุณุคุงู - ุชูููุฉ 100 ููุทุฉ">
                <div class="helper-icon">๐</div>
                <div class="helper-cost">100 ููุทุฉ</div>
            </button>
            
            <button class="helper-btn" data-type="skipQuestion" aria-label="ุงูุณุคุงู ุงูุชุงูู - ุชูููุฉ ูุชุบูุฑุฉ">
                <div class="helper-icon">โญ๏ธ</div>
                <div class="helper-cost">100 ููุทุฉ</div>
            </button>
        </div>

        <div class="timer-container" style="margin-top:12px;display:flex;align-items:center;gap:8px;">
            <div class="timer-bar" style="flex:1;height:10px;background:#eee;border-radius:6px;overflow:hidden;">
                <div class="timer-fill" style="width:100%;height:100%;"></div>
            </div>
            <span id="timer" class="timer-text" aria-live="polite" style="min-width:40px;text-align:center;">80</span>
        </div>

        <div class="question-container" style="margin-top:14px;">
            <div id="questionText" style="font-size:1.1rem;font-weight:600;">ูุง ูู ุนุงุตูุฉ ูุฑูุณุงุ</div>
            <div class="options-grid" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px;">
                <button class="option-btn" aria-label="ุฎูุงุฑ 1">ุจุงุฑูุณ</button>
                <button class="option-btn" aria-label="ุฎูุงุฑ 2">ููุฏู</button>
                <button class="option-btn" aria-label="ุฎูุงุฑ 3">ุจุฑููู</button>
                <button class="option-btn" aria-label="ุฎูุงุฑ 4">ูุฏุฑูุฏ</button>
            </div>
        </div>
    </div>

    <!-- END CONFIRM MODAL -->
    <div id="endConfirmModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal-content" role="document">
            <h3>ุฅููุงุก ุงููุณุงุจูุฉ</h3>
            <p>ุณูุชู ุงุญุชุณุงุจ ุงูููุงุท ุงูุชู ุฌูุนุชูุง ุญุชู ุงูุขู. ูู ุชุฑูุฏ ุฅููุงุก ุงููุณุงุจูุฉุ</p>
            <div class="modal-actions">
                <button id="confirmEndBtn" class="btn-main" aria-label="ุชุฃููุฏ ุฅููุงุก ุงููุณุงุจูุฉ">ุชุฃููุฏ</button>
                <button id="cancelEndBtn" class="btn-secondary" aria-label="ุฅูุบุงุก">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- IMPOSSIBLE QUESTION MODAL -->
    <div id="impossibleQuestionModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal-content impossible-modal" role="document">
            <div class="impossible-header" style="display:flex;gap:8px;align-items:center;">
                <i class="fas fa-exclamation-triangle" aria-hidden="true" style="color:#d97706;"></i>
                <h3>ุงูุณุคุงู ุงููุณุชุญูู</h3>
            </div>
            <p>ูุฑุตุชู ูุชุนููุถ ุงูุฎุณุงุฑุฉ! ุงู ููุฅุฑุชูุงุก ููุฑูุฒ ุฃุนูู. ูุง ูููู ุงุณุชุฎุฏุงู ุฃู ูุณุงุนุฏุงุช ูู ูุฐุง ุงูุณุคุงู.</p>
            <div class="modal-actions">
                <button id="viewResultsBtn" class="btn-secondary">ุนุฑุถ ุงููุชุงุฆุฌ</button>
                <button id="acceptChallengeBtn" class="btn-main">ูุจูู ุงูุชุญุฏู</button>
            </div>
        </div>
    </div>

    <!-- RESULTS SCREEN -->
    <div id="resultsScreen" class="screen" aria-hidden="true">
        <div class="content-box">
            <header class="screen-header" style="text-align:left;">
                <h2><i class="fas fa-trophy" aria-hidden="true"></i> ุงููุชุงุฆุฌ</h2>
            </header>
            
            <div class="results-summary" role="table" aria-label="ููุฎุต ุงููุชุงุฆุฌ" style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
                <div class="result-item"><span>ุงูุงุณู:</span><span id="resultName">AbuQusay</span></div>
                <div class="result-item"><span>ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ:</span><span id="resultCorrect">0</span></div>
                <div class="result-item"><span>ุงูุฅุฌุงุจุงุช ุงูุฎุงุทุฆุฉ:</span><span id="resultWrong">0</span></div>
                <div class="result-item"><span>ูุฑุงุช ุงูุชุฎุทู:</span><span id="resultSkips">0</span></div>
                <div class="result-item"><span>ุงูููุงุท ุงููููุฉ:</span><span id="resultScore">0</span></div>
                <div class="result-item"><span>ุงููุฏุฉ:</span><span id="resultTime">0 ุฏูุงุฆู ู 0 ุซูุงูู</span></div>
                <div class="result-item"><span>ุงูุณุคุงู ุงููุณุชุญูู:</span><span id="resultImpossible">ูู ููุณุชุฎุฏู</span></div>
            </div>
            
            <div class="performance-chart" style="margin-top:12px;">
                <div class="chart-bar" style="height:12px;background:#eee;border-radius:8px;overflow:hidden;">
                    <div id="performanceFill" class="chart-fill" style="width: 0%; height:100%;"></div>
                </div>
                <div id="performanceLabel" class="chart-label" style="margin-top:6px;"></div>
            </div>
            
            <div class="share-buttons" style="display:flex;gap:8px;margin-top:12px;">
                <!-- ูุชุฑู ุงูุฃุฒุฑุงุฑ ูุจูุชููุงุชุ ุงูุฌุงูุงุณูุฑุจุช ุณูุจูู ุฑูุงุจุท ุงููุดุงุฑูุฉ -->
                <button class="share-btn x-share" data-share-text="" aria-label="ูุดุงุฑูุฉ ุนูู X">
                    <i class="fab fa-x-twitter" aria-hidden="true"></i> ูุดุงุฑูุฉ ุนูู X
                </button>
                <button class="share-btn instagram-share" data-share-text="" aria-label="ูุดุงุฑูุฉ ุนูู ุฅูุณุชุบุฑุงู">
                    <i class="fab fa-instagram" aria-hidden="true"></i> ูุดุงุฑูุฉ ุนูู ุฅูุณุชุบุฑุงู
                </button>
            </div>
            
            <div class="button-group" style="margin-top:12px;">
                <button id="playAgainBtn" class="btn-main">ูุนุจ ูุฑุฉ ุฃุฎุฑู</button>
                <button id="backToHomeBtn" class="btn-secondary">ุงูุนูุฏุฉ ููุจุฏุงูุฉ</button>
            </div>
        </div>
    </div>

    <!-- LEADERBOARD SCREEN -->
    <div id="leaderboardScreen" class="screen" aria-hidden="true">
        <div class="content-box">
            <header class="screen-header" style="text-align:left;">
                <h2><i class="fas fa-trophy" aria-hidden="true"></i> ููุญุฉ ุงูุตุฏุงุฑุฉ / ุงูุฅุญุตุงุฆูุงุช</h2>
            </header>
            
            <div class="leaderboard-table-container" style="overflow:auto;">
                <table class="leaderboard-table" role="table" aria-label="ููุญุฉ ุงูุตุฏุงุฑุฉ">
                    <thead>
                        <tr>
                            <th scope="col">ุงูุชุฑุชูุจ</th>
                            <th scope="col">ุงูุงุณู</th>
                            <th scope="col">ุงูููุงุท</th>
                            <th scope="col">ุงูุณุคุงู ุงููุณุชุญูู</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody" role="rowgroup">
                        <!-- ูุชู ููุคูุง ุฏููุงููููุงู -->
                    </tbody>
                </table>
            </div>
            
            <div class="button-group" style="margin-top:12px;">
                <button id="backToStartBtn" class="btn-secondary">ุงูุนูุฏุฉ</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
